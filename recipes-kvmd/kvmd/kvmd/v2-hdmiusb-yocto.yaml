# Don't touch this file otherwise your device may stop working.
# Use override.yaml to modify required settings.
# You can find a working configuration in /usr/share/kvmd/configs.default/kvmd.

override: !include override.yaml

logging: !include logging.yaml

kvmd:
    server:
        unix: /run/kvmd/kvmd.sock

    auth: !include auth.yaml

    hid:
        type: otg
        keyboard:
            device: /dev/kvmd-hid-keyboard
        mouse:
            device: /dev/kvmd-hid-mouse

    atx:
        type: gpio
        power_led_pin: 0
        hdd_led_pin: 1
        power_switch_pin: 2
        reset_switch_pin: 3

    msd:
        type: otg
        remount_cmd:
          - /bin/true
        unlock_cmd:
          - /bin/true

    info:
        hw:
            vcgencmd_cmd: /bin/true

    streamer:
        quality: 0
        resolution: 1920x1080
        available_resolutions:
            - 1920x1080
            - 1600x1200
            - 1360x768
            - 1280x1024
            - 1280x960
            - 1280x720
            - 1024x768
            - 800x600
            - 720x576
            - 720x480
            - 640x480
        unix: /run/kvmd/ustreamer.sock
        cmd:
            - "/usr/bin/ustreamer"
            - "--device=/dev/kvmd-video"
            - "--persistent"
            - "--format=jpeg"
            - "--resolution={resolution}"
            - "--desired-fps={desired_fps}"
            - "--drop-same-frames=30"
            - "--last-as-blank=0"
            - "--unix={unix}"
            - "--unix-rm"
            - "--unix-mode=0660"
            - "--exit-on-parent-death"
            - "--process-name-prefix={process_name_prefix}"
            - "--notify-parent"
            - "--no-log-colors"

ipmi:
    kvmd:
        unix: /run/kvmd/kvmd.sock

vnc:
    kvmd:
        unix: /run/kvmd/kvmd.sock

    streamer:
        unix: /run/kvmd/ustreamer.sock
